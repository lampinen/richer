---
title: "ttt analysis"
author: "AndrewLampinen"
date: "November 27, 2016"
output: html_document
---

```{r}
library(dplyr)
library(tidyr)
library(ggplot2)
```

load data
---------------


```{r}
results_dir = 'results/secondrun/'

d = data.frame()

for (pretrain in c('True','False')) {
  for (eta in c('0.050000','0.010000')) {
    for (eta_decay in c('0.600000','0.70000','0.800000')) {
      for (opponent in c('optimal','random')) {
        if (!file.exists(sprintf('%savg_descr_opp_%s_score_track_pretrain-%s_eta-%s_eta_decay-%s.csv',results_dir,opponent,pretrain,eta,eta_decay))) {
          print("Skipping...")
          print(sprintf('%savg_descr_opp_%s_score_track_pretrain-%s_eta-%s_eta_decay-%s.csv',results_dir,opponent,pretrain,eta,eta_decay))
          next
        }
        this_track = read.csv(sprintf('%savg_basic_opp_%s_score_track_pretrain-%s_eta-%s_eta_decay-%s.csv',results_dir,opponent,pretrain,eta,eta_decay),header=F)
        d = rbind(d,data.frame(epoch=0:20,pct_wins=this_track$V1,pct_draws=this_track$V2,pct_losses=this_track$V3,pretrain=rep(pretrain,21),opponent=rep(opponent,21),eta=rep(eta,21),eta_decay=rep(eta_decay,21),learning=rep('basic',21)))
        this_track = read.csv(sprintf('%savg_descr_opp_%s_score_track_pretrain-%s_eta-%s_eta_decay-%s.csv',results_dir,opponent,pretrain,eta,eta_decay),header=F)
        d = rbind(d,data.frame(epoch=0:20,pct_wins=this_track$V1,pct_draws=this_track$V2,pct_losses=this_track$V3,pretrain=rep(pretrain,21),opponent=rep(opponent,21),eta=rep(eta,21),eta_decay=rep(eta_decay,21),learning=rep('descr',21)))
      }
    }
  }
}
```

```{r}

full_d = data.frame()

for (pretrain in c('True','False')) {
  for (eta in c('0.050000','0.010000')) {
    for (eta_decay in c('0.600000','0.70000','0.800000')) {
      for (opponent in c('optimal','random')) {
        for (run in 1:20) {
          if (!file.exists(sprintf('%sdescr_opp_%s_score_track_pretrain-%s_eta-%s_eta_decay-%s_run-%i.csv',results_dir,opponent,pretrain,eta,eta_decay,run))) {
            print("Skipping...")
            print(sprintf('%sdescr_opp_%s_score_track_pretrain-%s_eta-%s_eta_decay-%s_run-%i.csv',results_dir,opponent,pretrain,eta,eta_decay,run))
            next
          }
          this_track = read.csv(sprintf('%sbasic_opp_%s_score_track_pretrain-%s_eta-%s_eta_decay-%s_run-%i.csv',results_dir,opponent,pretrain,eta,eta_decay,run),header=F)
          full_d = rbind(full_d,data.frame(epoch=0:20,pct_wins=this_track$V1,pct_draws=this_track$V2,pct_losses=this_track$V3,pretrain=rep(pretrain,21),opponent=rep(opponent,21),eta=rep(eta,21),eta_decay=rep(eta_decay,21),learning=rep('basic',21),run=rep(run,21)))
          this_track = read.csv(sprintf('%sdescr_opp_%s_score_track_pretrain-%s_eta-%s_eta_decay-%s_run-%i.csv',results_dir,opponent,pretrain,eta,eta_decay,run),header=F)
          full_d = rbind(full_d,data.frame(epoch=0:20,pct_wins=this_track$V1,pct_draws=this_track$V2,pct_losses=this_track$V3,pretrain=rep(pretrain,21),opponent=rep(opponent,21),eta=rep(eta,21),eta_decay=rep(eta_decay,21),learning=rep('descr',21),run=rep(run,21)))
        }
      }
    }
  }
}
```


plot data 
------------
```{r}
theme_set(theme_bw(base_size=20))
```

```{r}
optimal_data = d %>% filter(opponent == 'optimal')
ggplot(data=optimal_data,aes(x=epoch,y=pct_draws,color=learning)) +
  geom_line() +
  facet_grid(eta_decay ~ eta) +
  theme_bw()
```

```{r}
random_data = d %>% filter(opponent == 'random')
ggplot(data=random_data,aes(x=epoch,y=pct_wins,color=learning)) +
  geom_line() +
  facet_grid(eta_decay ~ eta) +
  theme_bw()
```

```{r}
optimal_max_data = full_d %>% filter(opponent == 'optimal') %>% group_by(epoch,learning,eta,eta_decay) %>% summarize(pct_draws = max(pct_draws))
ggplot(data=optimal_max_data,aes(x=epoch,y=pct_draws,color=learning)) +
  geom_line() +
  facet_grid(eta_decay ~ eta) +
  theme_bw()
```

```{r}
random_max_data = full_d %>% filter(opponent == 'random') %>% group_by(epoch,learning,eta,eta_decay) %>% summarize(pct_wins = max(pct_wins),pct_draws = max(pct_draws))
ggplot(data=random_max_data,aes(x=epoch,y=pct_wins,color=learning)) +
  geom_line() +
  facet_grid(eta_decay ~ eta) +
  theme_bw()
```
